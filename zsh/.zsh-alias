# ENV
export PATH="./node_modules/.bin:$HOME/.gem/ruby/2.3.0/bin:$HOME/.npm-packages/bin:/opt/Mongoclient-linux-x64:/opt/wpscan:/opt/vcf2csv:$HOME/.gem/ruby/2.4.0/bin:/opt/jetbrains-toolbox:$HOME/.composer/vendor/bin:/opt/dex2jar:/usr/local/go/bin:/home/ranbogmord/.gem/ruby/2.5.0/bin:$PATH"
export EDITOR=vim
export VAGRANT_DEFAULT_PROVIDER="virtualbox"
export GOPATH="/www/go"
export PATH="$PATH:$GOPATH/bin"
export GOBIN="$GOPATH/bin"
export GOROOT="/usr/local/go"
export GOTOOLDIR="/usr/local/go/pkg/tool/linux_amd64"
export GCCGO="gccgo"
export CC="gcc"
export GOGCCFLAGS="-fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=/tmp/go-build009601552=/tmp/go-build -gno-record-gcc-switches"

export NPM_CONFIG_SAVE=true
export NPM_CONFIG_SAVE_EXACT=true
export NPM_CONFIG_INIT_AUTHOR_NAME="John Eriksson"
export NPM_CONFIG_INIT_AUTHOR_EMAIL="root@ranbogmord.com"
export NPM_CONFIG_INIT_LICENSE="MIT"
export NPM_CONFIG_PYTHON="python2"
export NPM_CONFIG_SIGN_GIT_TAG=true

[[ -f "~/.awscreds" ]] && source ~/.awscreds

# System
alias ll="ls -lah"
#alias .="ll"
#alias fuck='sudo !!'
# alias bashrc="vim ~/.bashrc && source ~/.bashrc"
alias pacman="sudo pacman"
alias systemctl="sudo systemctl"
alias open="xdg-open"
alias dirsize="find . -maxdepth 1 -type d | xargs -n 1 du -sh"
alias vim-ide="vim -c 'NERDTree'";
alias devssl="openssl req -x509 -newkey rsa:2048 -keyout dev.key -out dev.crt -days 365 -nodes -subj '/C=SE/ST=Vastra Gotaland/L=Gothenburg/O=DEVCERT/OU=DEV'"
alias tmptmp="cd $(mktemp -d)"
alias restart="systemctl restart"
alias status="systemctl status"
alias start="systemctl start"
alias stop="systemctl stop"
alias system-update="packer -Suy --noconfirm --noedit"
alias getuuid="uuidgen | tr -d '\n' | sed 's/-//g' | clipcopy"
alias edit-hosts="sudo vim /etc/hosts && restart dnsmasq.service"
alias zshalias="vim ~/.zsh-alias && source ~/.zsh-alias"
alias pstorm="pstorm &> /dev/null &"
alias getip="curl ipinfo.io/ip"
#alias vactivate="source ./bin/activate"
alias run-playbook="ansible-playbook -i hosts site.yml"
alias ovpn="sudo openvpn --config"
alias encrypt="openssl enc -aes-256-cbc -a"
alias decrypt="openssl enc -aes-256-cbc -a -d"
alias encless="openssl enc -aes-256-cbc -a -d | less"
alias ..="cd .."
alias 2..="cd ../.."
alias 3..="cd ../../.."
alias 4..="cd ../../../.."
alias godir="cd /www/go/src"

bbinky()
{
        inky src/inky/$1.html dist/inky \
                && node premailer.js dist/inky/$1.html > dist/inky/$1-inlined.html \
                && echo "Template built for $1"
}

#alias screenshot="FNAME=`date +'%Y-%m-%d_%H%M%S'`.png import /tmp/screen.png && scp /tmp/screen.png images:/var/www/html/$FNAME && echo -n \"https://images.ranbogmord.com/$FNAME\" | xclip -sel c"
screenshot()
{
        FNAME=`date +'%Y-%m-%d_%H%M%S'`
        import /tmp/screen.png \
                && scp /tmp/screen.png images:/var/www/html/$FNAME.png \
                && echo -n "https://images.ranbogmord.com/$FNAME.png" | xclip -sel c \
                && cp /tmp/screen.png ~/Pictures/Screenshots/$FNAME.png \
                && rm /tmp/screen.png \
                && notify-send "Link copied to clipboard"
}

alias midmancd="cd /www/provideit/radiator/midman"

#function md () mkdir -p "$1" && cd "$1"
#function md()
#{
#        mkdir -p "$1" && cd "$1"
#}
#export -f md

vactivate() {
        if [[ -n "$1"  ]]; then
                FOLDER=$1
        else
                FOLDER="."
        fi

        source "$FOLDER/bin/activate"
}

wcd() { cd "/www/$1" }

pcd() { cd "/www/provideit/$1"  }

loadtest() {
        ab -kl -H "Accept-Encoding: gzip, deflate" -n $1 -c $2 "$3" 
}

reset_docker_machine() {
        export DOCKER_TLS_VERIFY=""
        export DOCKER_HOST=""
        export DOCKER_CERT_PATH=""
        export DOCKER_MACHINE_NAME=""
}

# Git
alias gs="git status"
alias ga="git add"
alias gaa="git add --all ."
alias gc="git commit"
alias gac="gaa && gc"
alias gp="git push"
alias gpo="git push -u origin HEAD"
#alias gcd="cd `git rev-parse --show-toplevel`"
alias remove-orig="find . -name '*.orig' | xargs rm"
function gcd { cd "$(git rev-parse --show-toplevel)"; }; #export -f gcd;
alias g..='git rev-parse && cd "$(git rev-parse --show-toplevel)"'

alias midman-deploy-stage="git co stage && git ml - && git push && git co -"
alias merge-develop="git co develop && git ml - && git push && git co -"

# Vagrant
alias vu="vagrant up"
alias vh="vagrant halt"
alias vr="vagrant reload"
alias vdestroyr="vagrant destroy -f && vagrant up"
alias vs="vagrant ssh"
alias vus="vagrant up && vagrant ssh"
alias vrs="vagrant reload && vagrant ssh"
alias vup="vagrant up --provision"
alias vups="vagrant up --provision && vagrant ssh"
alias vrp="vagrant reload --provision"
alias vrps="vagrant reload --provision && vagrant ssh"

# Docker compose
alias dcu="docker-compose up"
alias dcb="docker-compose build"
alias dce="docker-compose exec"
alias dcs="docker-compose stop"
alias dcl="docker-compose logs"
alias dcps="docker-compose ps"
alias dc-rebuild="docker-compose down && docker-compose up -d"
alias dc-init="cp ~/.base-docker-compose.yml docker-compose.yml"
alias pwdtest="echo \"`pwd`\""

# Kubectl
alias kc="kubectl"

dcrestart() {
        docker-compose stop $1 && docker-compose up -d $1;
}

# Artisan
alias a="php artisan"
alias ati="php artisan tinker"


# OpenSSL
#alias check-expiry="echo | openssl s_client -connect $1:443 2>/dev/null | openssl x509 -noout -dates"
function check-expiry() { echo | openssl s_client -connect "$1:443" 2>/dev/null | openssl x509 -noout -dates;  };

export NVM_DIR="/home/ranbogmord/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"  # This loads nvm
PATH="/usr/local/heroku/bin:$PATH"
eval $(thefuck --alias)

